{% extends "user/base.html" %}
{% load css_class %}
{% load i18n %}
{% load staticfiles %}

{% block head %}
    <script defer="defer" src="{% static 'assets/js/utils.js' %}"></script>
    <script defer="defer" src="{% static 'assets/js/account-api-token.js' %}"></script>
{% endblock %}

{% block head-title %}{% trans 'API Token' %} - {% endblock %}

{% block account-content %}
    <h1>{% trans "API Token" %}</h1>
    <section id="tokenSection">
        <div id="regen-success" class="alert alert-success" hidden>{% trans 'New API token generated.' %}</div>
        <div id="regen-failure" class="alert alert-danger" hidden>{% trans 'Failed to regenerate API token.' %}</div>
        <div id="token-failure" class="alert alert-danger" hidden>{% trans 'Failed to fetch token.' %}</div>
        <span id="regen-confirm-text" hidden>{% trans 'Do you want to regenerate your API token?' %}</span>
        <p>{% trans 'Your API token is:' %}</p>
        <p><code id="token"></code></p>
        <form action="{% url 'api:v1:user-token-new' %}" method="post" id="api-token-regen-form">
            {% csrf_token %}
            <button class="btn btn-default btn-block" type="submit">{% trans 'Regenerate token' %}</button>
        </form>
    </section>
{% endblock %}
